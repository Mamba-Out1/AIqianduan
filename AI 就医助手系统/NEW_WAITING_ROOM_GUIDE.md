# 新待就诊界面使用说明

## 功能概述

新的待就诊界面提供了完整的患者就诊流程管理，包括：

1. **患者列表展示** - 显示所有待就诊患者的基本信息
2. **患者详细信息** - 展示选中患者的完整就诊信息
3. **语音转录功能** - 录制并转录医患对话
4. **AI病例总结** - 自动生成结构化病例总结
5. **完成就诊** - 标记就诊完成并更新状态

## 使用流程

### 1. 进入待就诊管理
- 在医生工作台的"待就诊"标签页中
- 点击"进入待就诊管理"按钮

### 2. 选择患者
- 浏览待就诊患者列表
- 点击患者卡片或"开始就诊"按钮选择患者

### 3. 查看患者信息
选中患者后可查看：
- 患者姓名和ID
- 就诊日期和类型
- 患者主诉（chief_complaint）
- 患者病情（notes）

### 4. 语音转录
- 点击"开始录音"按钮开始录制
- 录音过程中显示实时计时
- 点击"停止录音"完成录制
- 系统自动处理音频并生成转录文本

### 5. 病例总结生成
- 语音转录完成后自动生成病例总结
- 病例总结包含四个部分：
  - 症状详情（symptom_details）
  - 生命体征（vital_signs）
  - 既往病史（past_medical_history）
  - 当前用药（current_medications）

### 6. 完成就诊
- 确认病例总结无误后
- 点击"完成就诊"按钮
- 系统调用 `/api/visits/complete/{visitId}` 接口
- 就诊状态更新为已完成

## 技术特性

### API接口
- **获取患者列表**: `GET /api/visits/doctor/{doctorId}`
- **语音转录**: `POST /api/transcription/upload`
- **生成病例总结**: `POST /api/medical-summary/generate/{visitId}`
- **完成就诊**: `PUT /api/visits/complete/{visitId}`

### 响应式设计
- 支持桌面和移动设备
- 自适应网格布局
- 无障碍访问支持

### 实时反馈
- 录音状态实时显示
- 转录进度提示
- 病例总结流式生成
- 操作状态反馈

## 样式特色

- 渐变色主题设计
- 卡片悬停动画效果
- 录音状态动画指示
- 流畅的页面转场

## 注意事项

1. 确保后端服务运行在 `http://localhost:8070`
2. 需要浏览器支持麦克风权限
3. 语音转录需要网络连接
4. 病例总结生成可能需要几秒钟时间
5. 完成就诊后患者将从待就诊列表中移除